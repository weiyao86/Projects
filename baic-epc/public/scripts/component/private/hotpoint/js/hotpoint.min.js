function jsColor(){function i(t){t.charAt(0)=="#"?e=t:isNaN(t)?h(t.toLowerCase()):e="#"+t;var n=c(e);n||(e="#000000")}function s(){return e}function o(t,n,r){e=l(t,n,r),e==0&&(e="#000000")}function u(){return c(e)}function a(e){var t,n,r,i=u();return isNaN(e)||(t=parseInt(i[0]-e),n=parseInt(i[1]-e),r=parseInt(i[2]-e)),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),new jsColor(t,n,r)}function f(e){var t,n,r,i=u();return isNaN(e)||(t=parseInt(i[0]+e),n=parseInt(i[1]+e),r=parseInt(i[2]+e)),t>255&&(t=255),n>255&&(n=255),r>255&&(r=255),new jsColor(t,n,r)}function l(e,t,n){if(e<0||e>255||t<0||t>255||n<0||n>255)return!1;var r=Math.round(n)+256*Math.round(t)+65536*Math.round(e);return"#"+p(r.toString(16),6)}function c(e){var t,n,r;return e.charAt(0)=="#"&&(e=e.substring(1,7)),t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),t<0||t>255||n<0||n>255||r<0||r>255?!1:new Array(t,n,r)}function h(t){switch(t){case"aqua":e="#00FFFF";break;case"black":e="#000000";break;case"blue":e="#0000FF";break;case"fuchsia":e="#FF00FF";break;case"green":e="#008000";break;case"gray":e="#808080";break;case"lime":e="#00FF00";break;case"maroon":e="#800000";break;case"navy":e="#000080";break;case"olive":e="#808000";break;case"purple":e="#800080";break;case"red":e="#FF0000";break;case"silver":e="#C0C0C0";break;case"teal":e="#008080";break;case"white":e="#FFFFFF";break;case"yellow":e="#FFFF00"}}function p(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}var e="#000000";switch(arguments.length){case 1:i(arguments[0]);break;case 3:var t=arguments[0],n=arguments[1],r=arguments[2];e=l(t,n,r),e==0&&(e="#000000")}this.setHex=i,this.getHex=s,this.setRGB=o,this.getRGB=u,this.getDarkerShade=a,this.getLighterShade=f,this.rgbToHex=l,this.hexToRgb=c}function jsFont(e,t,n,r,i){this.family=null,this.weight=null,this.size=null,this.style=null,this.variant=null,e&&e!=""&&(this.family=e),t&&t!=""&&(this.weight=t),n&&n!=""&&(this.size=n),r&&r!=""&&(this.style=r),i&&i!=""&&(this.variant=i)}function jsPen(e,t){this.color=new jsColor,this.width="1px",arguments.length>0&&(this.color=e),arguments.length>=2&&(this.width=t),isNaN(t)||(this.width=t+"px")}function jsPoint(e,t){this.x=0,this.y=0,arguments.length==2&&(this.x=e,this.y=t)}function jsGraphics(e){function u(e){n=e}function a(){return n}function f(e){r=e}function l(){return r}function c(e){e=e.toLowerCase(),e.toLowerCase()!="default"&&e.toLowerCase()!="cartecian"?i="default":i=e}function h(){return i=name}function p(e){return i=="cartecian"?new jsPoint(e.x*r+n.x,n.y-e.y*r):new jsPoint(e.x*r+n.x,e.y*r+n.y)}function d(e,t,s){function T(e,t,n,r,i){var s=document.createElement("div");return s.style.position="absolute",s.style.left=t.x+"px",s.style.top=t.y+"px",s.style.color=r.getHex(),s.style.zIndex=-98,s.style.visibility="hidden",o.appendChild(s),n.family&&(s.style.fontFamily=n.family),n.weight&&(s.style.fontWeight=n.weight),n.size&&(s.style.fontSize=n.size),n.style&&(s.style.fontStyle=n.style),n.variant&&(s.style.fontVariant=n.variant),i&&(s.align=i),s.innerHTML=e,s}t==null&&(t=!0);var u,a,f,l,c=!1,h=!1;o.innerHTML="",s||(s=new jsColor(200,200,200)),e?e*=r:e=Math.round(parseInt(o.style.width)/10);var p=s.getHex();if(parseInt(o.style.width)<=0||parseInt(o.style.height)<=0)return;o.style.display="",u=parseInt(o.style.left),a=parseInt(o.style.left)+parseInt(o.style.width),f=parseInt(o.style.top),l=parseInt(o.style.top)+parseInt(o.style.height),n.x-parseInt(o.style.left)<=parseInt(o.style.left)+o.offsetWidth-n.x&&(c=!0),n.y-parseInt(o.style.top)<=parseInt(o.style.top)+o.offsetHeight-n.y&&(h=!0);var d=new Array,v=new jsFont("arial",null,"9px"),m=s.getDarkerShade(150),g=m.getHex();d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+u+"px;top:"+f+"px;width:"+(a-u+1)+"px;height:1px;background-color:"+p+'"></DIV>',d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+u+"px;top:"+l+"px;width:"+(a-u+1)+"px;height:1px;background-color:"+p+'"></DIV>',d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+u+"px;top:"+f+"px;width:1px;height:"+(l-f+1)+"px;background-color:"+p+'"></DIV>',d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+a+"px;top:"+f+"px;width:1px;height:"+(l-f+1)+"px;background-color:"+p+'"></DIV>';var y=o.offsetHeight,b=o.offsetWidth,w,E;for(var S=(n.x-u)%e;S<a;S+=e)S==n.x&&S>=u?S>=u&&S<=a&&(d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-99;left:'+S+"px;top:"+f+"px;width:1px;height:"+y+"px;background-color:"+g+'"></DIV>'):d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+S+"px;top:"+f+"px;width:1px;height:"+y+"px;background-color:"+p+'"></DIV>',t&&S>=u&&S<a&&(w&&w.offsetLeft+w.offsetWidth+1<S?w.offsetWidth<a-S&&(E=T(Math.round((S-n.x)/r),new jsPoint(S+2,f+1+n.y),v,m)):w||(E=T(Math.round((S-n.x)/r),new jsPoint(S+2,f+1+n.y),v,m)),E&&(h?(parseInt(E.style.top)-E.offsetHeight-1>f&&(E.style.top=parseInt(E.style.top)-E.offsetHeight-1),parseInt(E.style.top)<=f&&(E.style.top=f+1)):parseInt(E.style.top)+E.offsetHeight>l&&(E.style.top=l-E.offsetHeight-1),E.style.visibility="visible",w=E),E=null);w=null;for(var x=(n.y-f)%e;x<=l;x+=e)x==n.y?x>=f&&x<=l&&(d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-99;left:'+u+"px;top:"+x+"px;width:"+b+"px;height:1px;background-color:"+g+'"></DIV>'):d[d.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+u+"px;top:"+x+"px;width:"+b+"px;height:1px;background-color:"+p+'"></DIV>',t&&x!=n.y&&x>=f&&x<l&&(w&&w.offsetTop+w.offsetHeight<x?w.offsetHeight<=l-x&&(i=="cartecian"?E=T(Math.round((n.y-x)/r),new jsPoint(u+2+n.x,x),v,m):E=T(Math.round((x-n.y)/r),new jsPoint(u+2+n.x,x),v,m)):w||(i=="cartecian"?E=T(Math.round((n.y-x)/r),new jsPoint(u+2+n.x,x),v,m):E=T(Math.round((x-n.y)/r),new jsPoint(u+2+n.x,x),v,m)),E&&(c?(parseInt(E.style.left)-E.offsetWidth-2>u?E.style.left=parseInt(E.style.left)-E.offsetWidth-2:E.style.left=parseInt(E.style.left)+1,parseInt(E.style.left)<=u&&(E.style.left=u+1)):parseInt(E.style.left)+1+E.offsetWidth<a?E.style.left=parseInt(E.style.left)+1:E.style.left=a-E.offsetWidth-3,E.style.visibility="visible",h&&parseInt(E.style.top)+E.offsetHeight>n.y-E.offsetHeight&&parseInt(E.style.top)<n.y&&(E.style.visibility="hidden"),h&&parseInt(E.style.top)>n.y&&parseInt(E.style.top)<n.y+E.offsetHeight&&parseInt(E.style.top)>n.y&&(E.style.visibility="hidden"),n.y>l&&parseInt(E.style.top)+E.offsetHeight>l-E.offsetHeight&&(E.style.visibility="hidden"),!h&&parseInt(E.style.top)<n.y+E.offsetHeight&&parseInt(E.style.top)>n.y&&(E.style.visibility="hidden"),!h&&parseInt(E.style.top)<n.y&&parseInt(E.style.top)+E.offsetHeight>n.y&&parseInt(E.style.top)<n.y&&(alert(parseInt(E.style.top)),E.style.visibility="hidden"),n.y<f&&parseInt(E.style.top)<f+E.offsetHeight&&(E.style.visibility="hidden"),w=E),E=null);o.innerHTML=o.innerHTML+d.join("")}function v(){o.innerHTML="",o.style.display="none"}function m(e,t,n){if(!e||!t||!n)return!1;var r=s.appendChild(document.createElement("div"));arguments[3]!="physical"?(phPoint0=p(t),phPoint1=p(n)):(phPoint0=new jsPoint(t.x,t.y),phPoint1=new jsPoint(n.x,n.y));var i,o,u,a;i=phPoint0.x,o=phPoint1.x,u=phPoint0.y,a=phPoint1.y;var f=e.color.getHex();if(u==a)return i<=o?r.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+i+"px;top:"+u+"px;width:"+(o-i+1)+"px;height:"+e.width+";background-color:"+f+'"></DIV>':i>o&&(r.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+o+"px;top:"+u+"px;width:"+(i-o+1)+"px;height:"+e.width+";background-color:"+f+'"></DIV>'),r;if(i==o)return u<=a?r.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+i+"px;top:"+u+"px;width:"+e.width+";height:"+(a-u+1)+"px;background-color:"+f+'"></DIV>':u>a&&(r.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+i+"px;top:"+a+"px;width:"+e.width+";height:"+(u-a+1)+"px;background-color:"+f+'"></DIV>'),r;var l=new Array,c=new Array,h=Math.abs(o-i),d=Math.abs(a-u),v,m,g=parseInt(e.width);v=Math.round(Math.sqrt(g*g/(d*d/(h*h)+1))),m=Math.round(Math.sqrt(g*g-v*v)),m==0&&(m=1),v==0&&(v=1);var y=Math.abs(a-u)>Math.abs(o-i);if(y){var b=i;i=u,u=b,b=o,o=a,a=b}if(i>o){var b=i;i=o,o=b,b=u,u=a,a=b}var w=o-i,E=Math.abs(a-u),S=w/2,T,N=u;u<a?T=1:T=-1;var C,k,L=0,A=0;y?L=m:A=v;for(x=i;x<=o;x++)y?(x==i?(C=N,k=x):N==C?A+=1:(A+=v,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+C+"px;top:"+k+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>',A=0,C=N,k=x),x==o&&(A!=0?(A+=v,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+C+"px;top:"+k+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>'):(A=v,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+N+"px;top:"+x+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>'))):(x==i?(C=x,k=N):N==k?L+=1:(L+=m,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+C+"px;top:"+k+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>',L=0,C=x,k=N),x==o&&(L!=0?(L+=m,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+C+"px;top:"+k+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>'):(L=m,l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+x+"px;top:"+N+"px;width:"+L+"px;height:"+A+"px;background-color:"+f+'"></DIV>'))),S-=E,S<0&&(N+=T,S+=w);return r.innerHTML=l.join(""),r}function g(e,t){function n(){this.xMax=0,this.xMin=0,this.isVertex=!1}var r,i,s,o;r=e.x,i=t.x,s=e.y,o=t.y;var u=new Array,a=Math.abs(o-s)>Math.abs(i-r);if(a){var f=r;r=s,s=f,f=i,i=o,o=f}if(r>i){var f=r;r=i,i=f,f=s,s=o,o=f}var l=i-r,c=Math.abs(o-s),h=l/2,p,d=s;s<o?p=1:p=-1;for(x=r;x<=i;x++)a?(u[x]=new n,u[x].xMin=d,u[x].xMax=d,x==r&&d==s&&(u[x].isVertex=!0)):u[d]?u[d].xMax=x:(u[d]=new n,u[d].xMin=x,u[d].xMax=x,x==r&&d==s&&(u[d].isVertex=!0)),h-=c,h<0&&(d+=p,h+=l);return u}function b(e,t,n,i){if(!e||!t||!n||!i)return!1;n=Math.round(n*r),i=Math.round(i*r);var o=s.appendChild(document.createElement("div")),u=new Array,a=parseInt(e.width),f=e.color.getHex();return a>=i||a>=n?this.fillRectangle(e.color,t,n,i):(phPoint=p(t),u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+phPoint.y+"px;width:"+n+"px;height:"+a+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+(phPoint.y+i-a)+"px;width:"+n+"px;height:"+a+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+(phPoint.y+a)+"px;width:"+a+"px;height:"+(i-2*a+1)+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(phPoint.x+n-a)+"px;top:"+(phPoint.y+a)+"px;width:"+a+"px;height:"+(i-2*a+1)+"px;background-color:"+f+'"></DIV>',o.innerHTML=u.join(""),o)}function w(e,t,n,i){if(!e||!t||!n||!i)return!1;n=Math.round(n*r),i=Math.round(i*r);var o=s.appendChild(document.createElement("div"));phPoint=p(t);var u=e.getHex();return o.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+phPoint.y+"px;width:"+n+"px;height:"+i+"px;background-color:"+u+'"></DIV>',o}function E(e,t,n,r){if(!e||!t||!n||!r)return!1;var i=s.appendChild(document.createElement("div")),o=new Array,u=parseInt(e.width),a=e.color.getHex(),f=Math.round(n/2),l=Math.round(r/2),c=t.x,h=t.y,p=0,d=l,v=f*f,m=l*l,g=d,y=p,b,w;while(m*p<v*d)p++,m*p*p+v*(d-.5)*(d-.5)-v*m>=0&&d--,p==1&&d!=g&&(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+p)+"px;top:"+(h+d)+"px;width:1px;height:1px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+p)+"px;top:"+(h-d)+"px;width:1px;height:1px;background-color:"+a+'"></DIV>'),d!=g&&(b=p-y,o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y)+"px;top:"+(h+g-u+1)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y-b+1)+"px;top:"+(h+g-u+1)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y)+"px;top:"+(h-g)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y-b+1)+"px;top:"+(h-g)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',g=d,y=p),m*p>=v*d&&(b=p-y+1,o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y)+"px;top:"+(h+g-u+1)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y-b+1)+"px;top:"+(h+g-u+1)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y)+"px;top:"+(h-g)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y-b+1)+"px;top:"+(h-g)+"px;height:"+u+"px;width:"+b+"px;background-color:"+a+'"></DIV>');g=d,y=p;while(d!=0)d--,m*(p+.5)*(p+.5)+v*d*d-v*m<=0&&p++,p!=y&&(w=g-d,o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y-u+1)+"px;top:"+(h+g-w+1)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y-u+1)+"px;top:"+(h-g)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y)+"px;top:"+(h+g-w+1)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y)+"px;top:"+(h-g)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',y=p,g=d),d==0&&(w=g-d+1,o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y-u+1)+"px;top:"+(h+g-w+1)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+y-u+1)+"px;top:"+(h-g)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y)+"px;top:"+(h+g-w+1)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',o[o.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-y)+"px;top:"+(h-g)+"px;width:"+u+"px;height:"+w+"px;background-color:"+a+'"></DIV>',y=p,g=d);return i.innerHTML=o.join(""),i}function S(e,t,n,i){if(!e||!t||!n||!i)return!1;n*=r,i*=r;var o=s.appendChild(document.createElement("div")),u=new Array;phCenter=p(t);var a=parseInt(e.width);if(a<=1)return E(e,phCenter,n,i);var f=e.color.getHex(),l=Math.round(n/2),c=Math.round(i/2),h=phCenter.x,d=phCenter.y,v=l-a+1,m=c-a+1,g=T(phCenter,v*2,m*2),y=g[0],b=g[1],w=m,S=v*v,x=m*m,N=0,C=c,k=l*l,L=c*c,A,O;A=1,O=C;var M=w,_,D,P=1;while(L*N<k*C){N++,L*N*N+k*(C-.5)*(C-.5)-k*L>=0&&C--;if(C+1<m)C!=O&&(_=h-N+1,D=N-1+1-y[O],u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',_=_+2*(N-1)+1-D,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',O=C,A=N),L*N>=k*C&&(_=h-N,D=N+1-y[O],u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',_=_+2*N+1-D,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>');else{N==1&&C!=O&&(u[u.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+h+"px;top:"+(d+O-1)+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+h+"px;top:"+(d-O)+"px;background-color:"+f+'"></DIV>'),C!=O&&(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N+1)+"px;top:"+(d-O)+"px;width:"+(2*(N-1)+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N+1)+"px;top:"+(d+O)+"px;width:"+(2*(N-1)+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',O=C);if(C==m||C==0)u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N)+"px;top:"+(d-C)+"px;width:"+(2*N+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N)+"px;top:"+(d+C)+"px;width:"+(2*N+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>'}}A=N,O=C,P=1;var H=y[C];while(C!=0){C--,L*(N+.5)*(N+.5)+k*C*C-k*L<=0&&N++;if(C+1<m){if(N!=A||y[C]!=H)P=O-C,_=h-A,D=A+1-y[C+1],u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C+1)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',_=_+2*A+1-D,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C+1)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',A=N,O=C,H=y[C];C==0&&(P=O-C+1,_=h-N,D=N+1-y[C],u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',_=_+2*N+1-D,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d-O)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+_+"px;top:"+(d+C)+"px;width:"+D+"px;height:"+P+"px;background-color:"+f+'"></DIV>',A=N,O=C,H=y[C])}else{N!=A&&(P=O-C,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-A)+"px;top:"+(d-O)+"px;width:"+(2*A+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-A)+"px;top:"+(d+C+1)+"px;width:"+(2*A+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',A=N,O=C,H=y[C]);if(C==m||C==0)P=O-C+1,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N)+"px;top:"+(d-O)+"px;width:"+(2*N+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(h-N)+"px;top:"+(d+C)+"px;width:"+(2*N+1)+"px;height:"+P+"px;background-color:"+f+'"></DIV>',A=N,O=C,H=y[C]}}return o.innerHTML=u.join(""),o}function T(e,t,n){var r=Math.round(t/2),i=Math.round(n/2),s=e.x,o=e.y;xArray=new Array,xArrayI=new Array;var u=0,a=i,f=r*r,l=i*i;xArray[a]=u,xArrayI[a]=u;var c,h;while(l*u<f*a)u++,l*u*u+f*(a-.5)*(a-.5)-f*l>=0&&a--,xArray[a]||(xArray[a]=u),xArrayI[a]=u;while(a!=0)a--,l*(u+.5)*(u+.5)+f*a*a-f*l<=0&&u++,xArray[a]=u,xArrayI[a]=u;return new Array(xArray,xArrayI)}function N(e,t,n){return!e||!t||!n?!1:S(e,t,2*n,2*n)}function C(e,t,n){return!e||!t||!n?!1:k(e,t,2*n,2*n)}function k(e,t,n,i){if(!e||!t||!n||!i)return!1;n*=r,i*=r;var o=s.appendChild(document.createElement("div")),u=new Array;phCenter=p(t);var a=Math.round(n/2),f=Math.round(i/2),l=phCenter.x,c=phCenter.y,h=e.getHex(),d=0,v=f,m=a*a,g=f*f,y,b;y=1,b=v;while(g*d<m*v)d++,g*d*d+m*(v-.5)*(v-.5)-m*g>=0&&v--,d==1&&v!=b&&(u[u.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+l+"px;top:"+(c+b-1)+"px;background-color:"+h+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+l+"px;top:"+(c-b)+"px;background-color:"+h+'"></DIV>'),v!=b&&(u[u.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(l-d+1)+"px;top:"+(c-b)+"px;width:"+(2*d-1)+"px;background-color:"+h+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(l-d+1)+"px;top:"+(c+b)+"px;width:"+(2*d-1)+"px;background-color:"+h+'"></DIV>',b=v,y=d),g*d>=m*v&&(u[u.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(l-d)+"px;top:"+(c-b)+"px;width:"+(2*d+1)+"px;background-color:"+h+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(l-d)+"px;top:"+(c+b)+"px;width:"+(2*d+1)+"px;background-color:"+h+'"></DIV>');y=d,b=v;var w=1;while(v!=0)v--,g*(d+.5)*(d+.5)+m*v*v-m*g<=0&&d++,d!=y&&(w=b-v,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(l-y)+"px;top:"+(c-b)+"px;width:"+(2*y+1)+"px;height:"+w+"px;background-color:"+h+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(l-y)+"px;top:"+(c+v+1)+"px;width:"+(2*y+1)+"px;height:"+w+"px;background-color:"+h+'"></DIV>',y=d,b=v),v==0&&(w=b-v+1,u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(l-y)+"px;top:"+(c-b)+"px;width:"+(2*d+1)+"px;height:"+w+"px;background-color:"+h+'"></DIV>',u[u.length]='<DIV style="position:absolute;overflow:hidden;left:'+(l-y)+"px;top:"+(c+v)+"px;width:"+(2*d+1)+"px;height:"+w+"px;background-color:"+h+'"></DIV>');return o.innerHTML=u.join(""),o}function L(e,t,n,o,u,a){function ct(e,t){var n,r,r,i=G,s=G,o=!1,u=!1;if(e){var a=!1,f=!1;n=R,r=xDataArraySa,xDataArray2=xDataArrayEa,saDvar=c,eaDvar=d}else{var h=!1,p=!1;n=U,xDataArray2=xDataArraySa,r=xDataArrayEa,saDvar=360-d,eaDvar=360-c}eaDvar>saDvar?xDataArray2[n]&&H+G>=xDataArray2[n].xMin&&H<=xDataArray2[n].xMin?(W=xDataArray2[n].xMin,r[n]&&H+G>=r[n].xMax+1&&H<=r[n].xMax+1?(z=r[n].xMax+1,i=z-W):i=H+G-W,H=W,o=!0):r[n]&&H+G>=r[n].xMax+1&&H<=r[n].xMax+1?(z=r[n].xMax+1,i=z-H,o=!0):eaDvar>90&&saDvar<90&&(o=!0):(r[n]&&H+G>=r[n].xMax+1&&H<=r[n].xMax+1?(z=r[n].xMax+1,i=z-H,o=!0):eaDvar<90&&saDvar<90&&(o=!0),xDataArray2[n]&&H+G>=xDataArray2[n].xMin&&H<=xDataArray2[n].xMin?(F=xDataArray2[n].xMin,s=G-xDataArray2[n].xMin+H,u=!0):eaDvar>90&&saDvar>90&&(F=H,s=G,u=!0)),e?(o&&(a=!0),u&&(f=!0),Y=i,et=s):(o&&(h=!0),u&&(p=!0),Z=i,tt=s),c>=0&&c<180&&d>=0&&d<180&&c>d?h=!0:c>=180&&c<360&&d>=180&&d<360&&c>d&&(a=!0),F||(F=""),H||(H="");if(!t)if(e){if(A!=$||B!=H||I!=F||Y!=nt||et!=it){ot=K-O,ft&&I!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+I+"px;top:"+(R+1)+"px;width:"+it+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),ut&&B!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+B+"px;top:"+(R+1)+"px;width:"+nt+"px;height:"+ot+"px;background-color:"+T+'"></DIV>');if(ut||ft)B=H,ut=a,ft=f,$=A,K=O,nt=Y,it=et,I=F}}else if(A!=J||j!=H||q!=F||Z!=rt||tt!=st){ot=Q-O,lt&&q!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+(U-ot)+"px;width:"+st+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),at&&j!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+j+"px;top:"+(U-ot)+"px;width:"+rt+"px;height:"+ot+"px;background-color:"+T+'"></DIV>');if(at||lt)j=H,at=h,lt=p,J=A,Q=O,rt=Z,st=tt,q=F}t&&(e?(ut=a,ft=f,ut&&(B=H),ft&&(I=F),ut||ft?(K=O,$=A):(K=0,$=0),nt=Y,it=et):(at=h,lt=p,at&&(j=H),lt&&(q=F),at||lt?(Q=O,J=A):(Q=0,J=0),rt=Z,st=tt)),e?(ut=a,ft=f):(at=h,lt=p),O==1&&!e&&(ot=Q-O+1,p&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+F+"px;top:"+(U+1-ot)+"px;width:"+tt+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),h&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+H+"px;top:"+(U+1-ot)+"px;width:"+Z+"px;height:"+ot+"px;background-color:"+T+'"></DIV>')),O==0&&e&&(ot=K-O+1,f&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+F+"px;top:"+R+"px;width:"+et+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),a&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+H+"px;top:"+R+"px;width:"+Y+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'))}function ht(e){var t,n,n,r=G,i=G,s=!1,o=!1;if(e){var u=!1,a=!1;t=R,n=xDataArraySa,xDataArray2=xDataArrayEa,saDvar=c,eaDvar=d}else{var f=!1,h=!1;t=U,xDataArray2=xDataArraySa,n=xDataArrayEa,saDvar=360-d,eaDvar=360-c}eaDvar>saDvar?xDataArray2[t]!=null&&H+G>=xDataArray2[t].xMin&&H<=xDataArray2[t].xMin?(W=xDataArray2[t].xMin,n[t]!=null&&H+G>=n[t].xMax+1&&H<=n[t].xMax+1?(z=n[t].xMax+1,r=z-W):r=H+G-W,H=W,s=!0):n[t]!=null&&H+G>=n[t].xMax+1&&H<=n[t].xMax+1?(z=n[t].xMax+1,r=z-H,s=!0):eaDvar>90&&saDvar<90&&(s=!0):(n[t]!=null&&H+G>=n[t].xMax+1&&H<=n[t].xMax+1?(z=n[t].xMax+1,r=z-H,s=!0):eaDvar<90&&saDvar<90&&(s=!0),xDataArray2[t]!=null&&H+G>=xDataArray2[t].xMin&&H<=xDataArray2[t].xMin?(F=xDataArray2[t].xMin,i=G-xDataArray2[t].xMin+H,o=!0):eaDvar>90&&saDvar>90&&(F=H,i=G,o=!0)),e?(s&&(u=!0),o&&(a=!0),Y=r,et=i):(s&&(f=!0),o&&(h=!0),Z=r,tt=i),c>=0&&c<180&&d>=0&&d<180&&c>d?f=!0:c>=180&&c<360&&d>=180&&d<360&&c>d&&(u=!0),F==null&&(F="X"),H==null&&(H="X"),e?(ot=1,a&&F!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+F+"px;top:"+R+"px;width:"+et+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),u&&H!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+H+"px;top:"+R+"px;width:"+Y+"px;height:"+ot+"px;background-color:"+T+'"></DIV>')):(ot=1,h&&F!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+F+"px;top:"+(U+1-ot)+"px;width:"+tt+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'),f&&H!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+H+"px;top:"+(U+1-ot)+"px;width:"+Z+"px;height:"+ot+"px;background-color:"+T+'"></DIV>'))}if(!e||!t||!n||!o||u==null||a==null)return!1;n*=r,o*=r;if(a==0)return;var f=s.appendChild(document.createElement("div")),l=new Array;phCenter=p(t);var c;u>360?c=u%360:c=u;var h;a>360?h=a%360:h=a;var d;d=parseFloat(c)+parseFloat(h),d>360&&(d%=360);if(i=="cartecian"){c=360-c,d=360-d;var v;v=c,c=d,d=v}var m,y,b,w,E=c*Math.PI/180,S=h*Math.PI/180,x=d*Math.PI/180;c<=45&&c>=0||c>=135&&c<=225||c>=315&&c<=360?c>=90&&c<=270?(y=Math.round(phCenter.y-Math.tan(E)*n/2),m=Math.round(phCenter.x-n/2)):(y=Math.round(phCenter.y+Math.tan(E)*n/2),m=Math.round(phCenter.x+n/2)):c>=0&&c<=180?(m=Math.round(phCenter.x+1/Math.tan(E)*o/2),y=Math.round(phCenter.y+o/2)):(m=Math.round(phCenter.x-1/Math.tan(E)*o/2),y=Math.round(phCenter.y-o/2)),d<=45&&d>=0||d>=135&&d<=225||d>=315&&d<=360?d>=90&&d<=270?(w=Math.round(phCenter.y-Math.tan(x)*n/2),b=Math.round(phCenter.x-n/2)):(w=Math.round(phCenter.y+Math.tan(x)*n/2),b=Math.round(phCenter.x+n/2)):d>=0&&d<=180?(b=Math.round(phCenter.x+1/Math.tan(x)*o/2),w=Math.round(phCenter.y+o/2)):(b=Math.round(phCenter.x-1/Math.tan(x)*o/2),w=Math.round(phCenter.y-o/2)),xDataArraySa=g(phCenter,new jsPoint(m,y)),xDataArrayEa=g(phCenter,new jsPoint(b,w));var T=e.getHex(),N=Math.round(n/2),C=Math.round(o/2),k=phCenter.x,L=phCenter.y,A=0,O=C,M=N*N,_=C*C,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt;D=1,P=O;while(_*A<M*O)A++,_*A*A+M*(O-.5)*(O-.5)-M*_>=0&&O--,A==1&&O!=P?(R=L+P-1,U=L-P,G=1,Y=G,Z=G,et=G,tt=G,H=k,c>=0&&c<180&&d>=0&&d<180?(ht(!0),d<=c&&ht(!1)):c>=180&&c<360&&d>=180&&d<=360?(ht(!1),d<=c&&ht(!0)):(ht(!0),ht(!1))):O!=P&&(R=L+P,U=L-P,G=2*(A-1)+1,Y=G,Z=G,et=G,tt=G,H=k-A+1,c>=0&&c<180&&d>=0&&d<180?(ht(!0),d<=c&&ht(!1)):c>=180&&c<360&&d>=180&&d<=360?(ht(!1),d<=c&&ht(!0)):(ht(!0),ht(!1)),P=O,D=A),_*A>=M*O&&(R=L+P,U=L-P,G=2*A+1,Y=G,Z=G,et=G,tt=G,H=k-A,c>=0&&c<180&&d>=0&&d<180?(ht(!0),d<=c&&ht(!1)):c>=180&&c<360&&d>=180&&d<=360?(ht(!1),d<=c&&ht(!0)):(ht(!0),ht(!1)));D=A,P=O,ot=1,R=L+O,U=L-O,G=2*A+1,Y=G,Z=G,et=G,tt=G,H=k-A,c>=0&&c<180&&d>=0&&d<180?(xDataArrayEa.pop(),ct(!0,!0),d<=c&&ct(!1,!0)):c>=180&&c<360&&d>=180&&d<=360?(xDataArrayEa.pop(),O!=0&&ct(!1,!0),d<=c&&ct(!0,!0)):(c>=180&&c<360?xDataArraySa.pop():xDataArrayEa.pop(),ct(!0,!0),O!=0&&(H=k-A,ct(!1,!0)));while(O!=0)O--,_*(A+.5)*(A+.5)+M*O*O-M*_<=0&&A++,R=L+O,U=L-O,G=2*A+1,Y=G,Z=G,et=G,tt=G,H=k-A,c>=0&&c<180&&d>=0&&d<180?(ct(!0),d<=c&&ct(!1)):c>=180&&c<360&&d>=180&&d<=360?(O!=0&&ct(!1),d<=c&&ct(!0)):(ct(!0),O!=0&&(H=k-A,ct(!1)));return f.innerHTML=l.join(""),f}function A(e,t,n,o,u,a){function Mt(e,t){var n,r,r,i=ft,s=ft,o=!1,u=!1,a;if(e){var f=!1,h=!1;n=$,r=xDataArraySa,xDataArray2=xDataArrayEa,saDvar=c,eaDvar=d}else{var p=!1,v=!1;n=J,xDataArray2=xDataArraySa,r=xDataArrayEa,saDvar=360-d,eaDvar=360-c}eaDvar>saDvar?xDataArray2[n]!=null&&R+ft>=xDataArray2[n].xMin&&R<=xDataArray2[n].xMin?(Q=xDataArray2[n].xMin,r[n]!=null&&R+ft>=r[n].xMax+1&&R<=r[n].xMax+1?(K=r[n].xMax+1,i=K-Q):i=R+ft-Q,R=Q,o=!0):r[n]!=null&&R+ft>=r[n].xMax+1&&R<=r[n].xMax+1?(K=r[n].xMax+1,i=K-R,o=!0):eaDvar>90&&saDvar<90&&(o=!0):(r[n]!=null&&R+ft>=r[n].xMax+1&&R<=r[n].xMax+1?(K=r[n].xMax+1,i=K-R,o=!0):eaDvar<90&&saDvar<90&&(o=!0),xDataArray2[n]!=null&&R+ft>=xDataArray2[n].xMin&&R<=xDataArray2[n].xMin?(W=xDataArray2[n].xMin,s=ft-xDataArray2[n].xMin+R,u=!0):eaDvar>90&&saDvar>90&&(W=R,s=ft,u=!0)),e?(o&&(f=!0),u&&(h=!0),lt=i,ht=s):(o&&(p=!0),u&&(v=!0),ct=i,pt=s),c>=0&&c<180&&d>=0&&d<180&&c>d?p=!0:c>=180&&c<360&&d>=180&&d<360&&c>d&&(f=!0),f&&j[$-A]!=null&&R!=null&&(L+j[$-A]<=R+lt?lt>R+lt-L-j[$-A]&&(rt=L+j[$-A],bt=R+lt-L-j[$-A]):rt=null,R<=L-j[$-A]+1?lt>L-j[$-A]-R+1&&(lt=L-j[$-A]-R+1):lt>=R+lt-L-j[$-A]+1&&(R=null)),h&&j[$-A]!=null&&W!=null&&(L+j[$-A]<=W+ht?ht>W+ht-L-j[$-A]&&(it=L+j[$-A],Et=W+ht-L-j[$-A]):it=null,W<=L-j[$-A]+1?ht>L-j[$-A]-W+1&&(ht=L-j[$-A]-W+1):ht>=W+ht-L-j[$-A]+1&&(W=null)),p&&j[$-A]!=null&&R!=null&&(L+j[$-A]<=R+ct?ct>R+ct-L-j[$-A]&&(rt=L+j[$-A],wt=R+ct-L-j[$-A]):rt=null,R<=L-j[$-A]+1?ct>L-j[$-A]-R+1&&(ct=L-j[$-A]-R+1):ct>=R+ct-L-j[$-A]+1&&(R=null)),v&&j[$-A]!=null&&W!=null&&(L+j[$-A]<=W+pt?pt>W+pt-L-j[$-A]&&(it=L+j[$-A],St=W+pt-L-j[$-A]):it=null,W<=L-j[$-A]+1?pt>L-j[$-A]-W+1&&(pt=L-j[$-A]-W+1):pt>=W+pt-L-j[$-A]+1&&(W=null)),W==null&&(W=""),R==null&&(R="");if(!t)if(e){if(O!=Z||U!=R||st!=rt||X!=W||ut!=it||lt!=dt||ht!=mt||bt!=xt||Et!=Nt){yt=tt-M,At&&(X!=null&&X!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+X+"px;top:"+($+1)+"px;width:"+mt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),ut!=null&&ut!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+ut+"px;top:"+($+1)+"px;width:"+Nt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),kt&&(U!=null&&U!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+U+"px;top:"+($+1)+"px;width:"+dt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),st!=null&&st!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+st+"px;top:"+($+1)+"px;width:"+xt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'));if(kt||At)U=R,st=rt,kt=f,At=h,Z=O,tt=M,dt=lt,mt=ht,X=W,ut=it,xt=bt,Nt=Et}}else if(O!=et||z!=R||ot!=rt||V!=W||ct!=vt||wt!=Tt||pt!=gt||St!=Ct){yt=nt-M,Ot&&(V!=null&&V!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+V+"px;top:"+(J-yt)+"px;width:"+gt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),at!=null&&at!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+at+"px;top:"+(J-yt)+"px;width:"+Ct+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),Lt&&(z!=null&&z!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+z+"px;top:"+(J-yt)+"px;width:"+vt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),ot!=null&&ot!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+ot+"px;top:"+(J-yt)+"px;width:"+Tt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'));if(Lt||Ot)z=R,ot=rt,Lt=p,Ot=v,et=O,nt=M,vt=ct,gt=pt,V=W,at=it,Tt=wt,Ct=St}t&&(e?(kt=f,At=h,kt&&(U=R,st=rt),At&&(X=W,ut=it),kt||At?(tt=M,Z=O):(tt=0,Z=0),dt=lt,mt=ht,xt=bt,Nt=Et):(Lt=p,Ot=v,Lt&&(z=R,ot=rt),Ot&&(V=W,at=it),Lt||Ot?(nt=M,et=O):(nt=0,et=0),vt=ct,gt=pt,Tt=wt,Ct=St)),e?(kt=f,At=h):(Lt=p,Ot=v),M==1&&!e&&(yt=nt-M+1,v&&(W!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+(J+1-yt)+"px;width:"+pt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),it!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+it+"px;top:"+(J+1-yt)+"px;width:"+St+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),p&&(R!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+(J+1-yt)+"px;width:"+ct+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),rt!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+rt+"px;top:"+(J+1-yt)+"px;width:"+wt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'))),M==0&&e&&(yt=tt-M+1,h&&(W!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+$+"px;width:"+ht+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),it!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+it+"px;top:"+$+"px;width:"+Et+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),f&&(R!=""&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+$+"px;width:"+lt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),rt!=null&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+rt+"px;top:"+$+"px;width:"+bt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')))}function _t(e){var t,n,n,r=ft,i=ft,s=!1,o=!1;if(e){var u=!1,a=!1;t=$,n=xDataArraySa,xDataArray2=xDataArrayEa,saDvar=c,eaDvar=d}else{var f=!1,h=!1;t=J,xDataArray2=xDataArraySa,n=xDataArrayEa,saDvar=360-d,eaDvar=360-c}eaDvar>saDvar?xDataArray2[t]!=null&&R+ft>=xDataArray2[t].xMin&&R<=xDataArray2[t].xMin?(Q=xDataArray2[t].xMin,n[t]&&R+ft>=n[t].xMax+1&&R<=n[t].xMax+1?(K=n[t].xMax+1,r=K-Q):r=R+ft-Q,R=Q,s=!0):n[t]!=null&&R+ft>=n[t].xMax+1&&R<=n[t].xMax+1?(K=n[t].xMax+1,r=K-R,s=!0):eaDvar>90&&saDvar<90&&(s=!0):(n[t]!=null&&R+ft>=n[t].xMax+1&&R<=n[t].xMax+1?(K=n[t].xMax+1,r=K-R,s=!0):eaDvar<90&&saDvar<90&&(s=!0),xDataArray2[t]!=null&&R+ft>=xDataArray2[t].xMin&&R<=xDataArray2[t].xMin?(W=xDataArray2[t].xMin,i=ft-xDataArray2[t].xMin+R,o=!0):eaDvar>90&&saDvar>90&&(W=R,i=ft,o=!0)),e?(s&&(u=!0),o&&(a=!0),lt=r,ht=i):(s&&(f=!0),o&&(h=!0),ct=r,pt=i),c>=0&&c<180&&d>=0&&d<180&&c>d?f=!0:c>=180&&c<360&&d>=180&&d<360&&c>d&&(u=!0),u&&j[$-A]&&R!=null&&(L+j[$-A]<=R+lt?lt>R+lt-L-j[$-A]&&(rt=L+j[$-A],bt=R+lt-L-j[$-A]):rt="X",R<L-j[$-A]+1?lt>L-j[$-A]-R+1&&(lt=L-j[$-A]-R+1):lt>=R+lt-L-j[$-A]+1&&(R="X")),a&&j[$-A]&&W!=null&&(L+j[$-A]<=W+ht?ht>W+ht-L-j[$-A]&&(it=L+j[$-A],Et=W+ht-L-j[$-A]):it="X",W<=L-j[$-A]+1?ht>L-j[$-A]-W+1&&(ht=L-j[$-A]-W+1):ht>=W+ht-L-j[$-A]+1&&(W="X")),f&&j[$-A]&&R!=null&&(L+j[$-A]<=R+ct?ct>R+ct-L-F[$-A]&&(rt=L+j[$-A],wt=R+ct-L-j[$-A]):rt="X",R<=L-j[$-A]+1?ct>L-j[$-A]-R+1&&(ct=L-j[$-A]-R+1):ct>=R+ct-L-j[$-A]+1&&(R="X")),h&&F[$-A]&&W!=null&&(L+j[$-A]<=W+pt?pt>W+pt-L-j[$-A]&&(it=L+j[$-A],St=W+pt-L-j[$-A]):it="X",W<=L-j[$-A]+1?pt>L-j[$-A]-W+1&&(pt=L-j[$-A]-W+1):pt>=W+pt-L-j[$-A]+1&&(W="X")),W==null&&(W="X"),R==null&&(R="X"),it==null&&(it="X"),rt==null&&(rt="X"),e?(yt=1,a&&(W!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+$+"px;width:"+ht+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),it!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+it+"px;top:"+$+"px;width:"+Et+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),u&&(R!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+$+"px;width:"+lt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),rt!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+rt+"px;top:"+$+"px;width:"+bt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'))):(yt=1,h&&(W!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+(J+1-yt)+"px;width:"+pt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),it!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+it+"px;top:"+(J+1-yt)+"px;width:"+St+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')),f&&(R!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+(J+1-yt)+"px;width:"+ct+"px;height:"+yt+"px;background-color:"+N+'"></DIV>'),rt!="X"&&(l[l.length]='<DIV style="position:absolute;overflow:hidden;left:'+rt+"px;top:"+(J+1-yt)+"px;width:"+wt+"px;height:"+yt+"px;background-color:"+N+'"></DIV>')))}if(!e||!t||!n||!o||u==null||a==null)return!1;n*=r,o*=r;if(a==0)return;var f=s.appendChild(document.createElement("div")),l=new Array;phCenter=p(t);var c;u>360?c=u%360:c=u;var h;a>360?h=a%360:h=a;var d;d=parseFloat(c)+parseFloat(h),d>360&&(d%=360);if(i=="cartecian"){c=360-c,d=360-d;var v;v=c,c=d,d=v}var m,y,b,w,E=c*Math.PI/180,S=h*Math.PI/180,x=d*Math.PI/180;c<=45&&c>=0||c>=135&&c<=225||c>=315&&c<=360?c>=90&&c<=270?(y=Math.round(phCenter.y-Math.tan(E)*n/2),m=Math.round(phCenter.x-n/2)):(y=Math.round(phCenter.y+Math.tan(E)*n/2),m=Math.round(phCenter.x+n/2)):c>=0&&c<=180?(m=Math.round(phCenter.x+1/Math.tan(E)*o/2),y=Math.round(phCenter.y+o/2)):(m=Math.round(phCenter.x-1/Math.tan(E)*o/2),y=Math.round(phCenter.y-o/2)),d<=45&&d>=0||d>=135&&d<=225||d>=315&&d<=360?d>=90&&d<=270?(w=Math.round(phCenter.y-Math.tan(x)*n/2),b=Math.round(phCenter.x-n/2)):(w=Math.round(phCenter.y+Math.tan(x)*n/2),b=Math.round(phCenter.x+n/2)):d>=0&&d<=180?(b=Math.round(phCenter.x+1/Math.tan(x)*o/2),w=Math.round(phCenter.y+o/2)):(b=Math.round(phCenter.x-1/Math.tan(x)*o/2),w=Math.round(phCenter.y-o/2)),xDataArraySa=g(phCenter,new jsPoint(m,y)),xDataArrayEa=g(phCenter,new jsPoint(b,w));var N=e.color.getHex(),C=Math.round(n/2),k=Math.round(o/2),L=phCenter.x,A=phCenter.y,O=0,M=k,_=C*C,D=k*k,N=e.color.getHex(),P=C-parseInt(e.width)+1,H=k-parseInt(e.width)+1,B=T(phCenter,P*2,H*2),j=B[0],F=B[1];j.pop(),F.pop();var I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot;I=1,q=M;while(D*O<_*M)O++,D*O*O+_*(M-.5)*(M-.5)-_*D>=0&&M--,O==1&&M!=q?($=A+q-1,J=A-q,ft=1,lt=ft,ct=ft,ht=ft,pt=ft,R=L,c>=0&&c<180&&d>=0&&d<180?(_t(!0),d<=c&&_t(!1)):c>=180&&c<360&&d>=180&&d<=360?(_t(!1),d<=c&&_t(!0)):(_t(!0),_t(!1))):M!=q&&($=A+q,J=A-q,ft=2*(O-1)+1,lt=ft,ct=ft,ht=ft,pt=ft,R=L-O+1,c>=0&&c<180&&d>=0&&d<180?(_t(!0),d<=c&&_t(!1)):c>=180&&c<360&&d>=180&&d<=360?(_t(!1),d<=c&&_t(!0)):(_t(!0),_t(!1)),q=M,I=O),D*O>=_*M&&($=A+q,J=A-q,ft=2*O+1,lt=ft,ct=ft,ht=ft,pt=ft,R=L-O,c>=0&&c<180&&d>=0&&d<180?(_t(!0),d<=c&&_t(!1)):c>=180&&c<360&&d>=180&&d<=360?(_t(!1),d<=c&&_t(!0)):(_t(!0),_t(!1)));I=O,q=M,yt=1,$=A+M,J=A-M,ft=2*O+1,lt=ft,ct=ft,ht=ft,pt=ft,R=L-O,c>=0&&c<180&&d>=0&&d<180?(xDataArrayEa.pop(),Mt(!0,!0),d<=c&&Mt(!1,!0)):c>=180&&c<360&&d>=180&&d<=360?(xDataArrayEa.pop(),M!=0&&Mt(!1,!0),d<=c&&Mt(!0,!0)):(c>=180&&c<360?xDataArraySa.pop():xDataArrayEa.pop(),Mt(!0,!0),M!=0&&(R=L-O,Mt(!1,!0)));while(M!=0)M--,D*(O+.5)*(O+.5)+_*M*M-_*D<=0&&O++,$=A+M,J=A-M,ft=2*O+1,lt=ft,ct=ft,ht=ft,pt=ft,R=L-O,c>=0&&c<180&&d>=0&&d<180?(Mt(!0),d<=c&&Mt(!1)):c>=180&&c<360&&d>=180&&d<=360?(M!=0&&Mt(!1),d<=c&&Mt(!0)):(Mt(!0),M!=0&&(R=L-O,Mt(!1)));return f.innerHTML=l.join(""),f}function O(e,t){if(!e||!t)return!1;var n=s.appendChild(document.createElement("div"));for(var r=1;r<t.length;r++)n.appendChild(this.drawLine(e,t[r-1],t[r]));return n}function M(e,t){if(!e||!t)return!1;var n=s.appendChild(document.createElement("div")),r;for(r=1;r<t.length;r++)n.appendChild(this.drawLine(e,t[r-1],t[r]));n.appendChild(this.drawLine(e,t[r-1],t[0]))}function _(e,t){function L(e,t){return e.xMin-t.xMin}if(!e||!t)return!1;var n=new Array,r;for(r=0;r<t.length;r++)n[r]=p(t[r]);var i=s.appendChild(document.createElement("div")),o=new Array,u=e.getHex(),a=new Array,f=n[0].y,l=n[0].y,c=new Array,h,d,v,m;m=n.length;for(r=0;r<n.length;r++){r!=0?d=r-1:d=m-1;if(n[d].x!=n[r].x||n[d].y!=n[r].y)c[c.length]=n[r]}n=c,c=new Array,m=n.length;for(r=0;r<n.length;r++)r!=0?d=r-1:d=m-1,r!=m-1?v=r+1:v=0,n[r].y!=n[v].y||n[r].y!=n[d].y?c[c.length]=n[r]:n[d].x<=n[r].x?(o[o.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',o[o.length]=n[d].x,o[o.length]="px;top:",o[o.length]=n[r].y,o[o.length]="px;width:",o[o.length]=n[r].x-n[d].x,o[o.length]="px;background-color:",o[o.length]=u,o[o.length]='"></DIV>'):(o[o.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',o[o.length]=n[r].x,o[o.length]="px;top:",o[o.length]=n[r].y,o[o.length]="px;width:",o[o.length]=n[d].x-n[r].x,o[o.length]="px;background-color:",o[o.length]=u,o[o.length]='"></DIV>');n=c;for(r=1;r<n.length;r++){f>n[r-1].y&&(f=n[r-1].y),l<n[r-1].y&&(l=n[r-1].y),a[r-1]=g(n[r-1],n[r]);if(r<n.length-1){if(n[r-1].y<n[r].y&&n[r].y<n[r+1].y||n[r-1].y>n[r].y&&n[r].y>n[r+1].y)a[r-1][n[r].y]=null}else if(n[r-1].y<n[r].y&&n[r].y<n[0].y||n[r-1].y>n[r].y&&n[r].y>n[0].y)a[r-1][n[r].y]=null}f>n[r-1].y&&(f=n[r-1].y),l<n[r-1].y&&(l=n[r-1].y),a[r-1]=g(n[r-1],n[0]);if(n[r-1].y<n[0].y&&n[0].y<n[1].y||n[r-1].y>n[0].y&&n[0].y>n[1].y)a[r-1][n[0].y]=null;var y,b="",w;m=n.length;var E,S,x,T,N,C;for(y=f;y<=l;y++){w=0;var k=new Array;for(r=0;r<m;r++){E=a[r],r!=0?d=r-1:d=m-1,r!=1&&r!=0?h=r-2:r==0?h=m-2:h=m-1,r!=m-1?v=r+1:v=0;if(y==n[r].y&&y==n[d].y&&y<n[h].y&&y<n[v].y&&E[y]||y==n[r].y&&y==n[d].y&&y>n[h].y&&y>n[v].y&&E[y])k[w]=E[y],w++;E[y]&&(k[w]=E[y],w++)}k.sort(L),N=y;for(r=0;r<k.length;r+=2)k[r+1]?(T=k[r].xMin,k[r+1].xMax>k[r].xMax?C=k[r+1].xMax-k[r].xMin+1:C=k[r].xMax-k[r].xMin+1):(T=k[k.length-1].xMin,C=k[k.length-1].xMax-k[k.length-1].xMin+1),o[o.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',o[o.length]=T,o[o.length]="px;top:",o[o.length]=N,o[o.length]="px;width:",o[o.length]=C,o[o.length]="px;background-color:",o[o.length]=u,o[o.length]='"></DIV>'}return i.innerHTML=o.join(""),i}function D(e,t){if(!e||!t)return!1;var n=new Array,r;for(r=0;r<t.length;r++)n[r]=p(t[r]);if(n.length>4)n=new Array(n[0],n[1],n[2],n[3]);else if(n.length<4)return!1;var i=s.appendChild(document.createElement("div")),o=new Array,u=n[0].x,a=n[0].x;for(r=1;r<n.length;r++)u>n[r-1].x&&(u=n[r-1].x),a<n[r-1].x&&(a=n[r-1].x);var f,l,c,h,d,v,m,g;f=n[0].x,d=n[0].y,l=n[1].x,v=n[1].y,c=n[2].x,m=n[2].y,h=n[3].x,g=n[3].y;var y,b,w,E,S=f-1,x=d-1,T,N;E=0;var C=1,k=parseInt(e.width),L=e.color.getHex(),A=k,O=k;T=f,N=d;var M=!1,_=!1,D=1.1,P=new Array,H,B,j,F;H=N,B=N,j=T,F=T;while(E<=1)y=0,b=0,y=(1-E)*(1-E)*(1-E)*f+3*(1-E)*(1-E)*E*l+3*(1-E)*E*E*c+E*E*E*h,b=(1-E)*(1-E)*(1-E)*d+3*(1-E)*(1-E)*E*v+3*(1-E)*E*E*m+E*E*E*g,y=Math.round(y),b=Math.round(b),y!=S||b!=x?y-S>1||b-x>1||S-y>1||x-b>1?(E-=C,C/=D):(P[P.length]=new jsPoint(y,b),S=y,x=b):(E-=C,C*=D),E+=C;var I=new Array;for(var r=0;r<P.length;r++){var q=!1;y=P[r].x,b=P[r].y,r!=0&&r+1<P.length&&Math.abs(P[r-1].x-P[r+1].x)==1&&Math.abs(P[r-1].y-P[r+1].y)==1&&(I[r-1]||(q=!0,I[r]=!0)),q||(b==N&&!_&&(M=!0),y==T&&!M&&(_=!0),y!=T&&!M&&(B==H?(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=T,o[o.length]="px;top:",o[o.length]=H,o[o.length]="px;width:",o[o.length]=k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'):(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=T,o[o.length]="px;top:",o[o.length]=H,o[o.length]="px;width:",o[o.length]=k,o[o.length]="px;height:",o[o.length]=B-H+k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'),T=y,N=b,H=N,B=N,_=!1),b!=N&&!_&&(F==j?(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=j,o[o.length]="px;top:",o[o.length]=N,o[o.length]="px;width:",o[o.length]=k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'):(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=j,o[o.length]="px;top:",o[o.length]=N,o[o.length]="px;width:",o[o.length]=F-j+k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'),T=y,N=b,j=T,F=T,M=!1),_&&!M?(b<=H&&(H=b),b>B&&(B=b)):(H=b,B=b),M&&!_?(y<=j&&(j=y),y>F&&(F=y)):(j=y,F=y),r==P.length-1&&(_||(F==j?(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=j,o[o.length]="px;top:",o[o.length]=N,o[o.length]="px;width:",o[o.length]=k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'):(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=j,o[o.length]="px;top:",o[o.length]=N,o[o.length]="px;width:",o[o.length]=F-j+k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>')),M||(B==H?(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=T,o[o.length]="px;top:",o[o.length]=H,o[o.length]="px;width:",o[o.length]=k,o[o.length]="px;height:",o[o.length]=k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'):(o[o.length]='<DIV style="position:absolute;overflow:hidden;left:',o[o.length]=T,o[o.length]="px;top:",o[o.length]=H,o[o.length]="px;width:",o[o.length]=F-j+k,o[o.length]="px;height:",o[o.length]=B-H+k,o[o.length]="px;background-color:",o[o.length]=L,o[o.length]='"></DIV>'))))}return i.innerHTML=o.join(""),i}function P(e,n){function I(e){var t=1;for(var n=1;n<=e;n++)t*=n;return t}if(!e||!n)return!1;if(n.length<2)return!1;var r=new Array;for(var i=0;i<n.length;i++)r[i]=p(n[i]);var o=s.appendChild(document.createElement("div")),u=new Array,a=new Array,f=new Array,l=r.length-1;for(var i=0;i<=l;i++)a[i]=r[i].x*I(l)/(I(i)*I(l-i)),f[i]=r[i].y*I(l)/(I(i)*I(l-i));var c=r[0].x-1,h=r[0].y-1,d,v;t=0;var m=1,g=parseInt(e.width),y=e.color.getHex(),b=g,w=g;d=r[0].x,v=r[0].y;var E=!1,S=!1,x=0,T,N=0,C,k,L,A,O,M=1.1,_=new Array,D,P,H,B;D=v,P=v,H=d,B=d;while(t<=1){C=0,k=0;for(var i=0;i<=l;i++)N=Math.pow(1-t,l-i)*Math.pow(t,i),C+=a[i]*N,k+=f[i]*N;var A,O;A=C,O=k,C=Math.round(C),k=Math.round(k),C!=c||k!=h?C-c>1||k-h>1||c-C>1||h-k>1?(t-=m,m/=M):(_[_.length]=new jsPoint(C,k),c=C,h=k):(t-=m,m*=M),t+=m}var j=new Array;for(var i=0;i<_.length;i++){var F=!1;C=_[i].x,k=_[i].y,i!=0&&i+1<_.length&&Math.abs(_[i-1].x-_[i+1].x)==1&&Math.abs(_[i-1].y-_[i+1].y)==1&&(j[i-1]||(F=!0,j[i]=!0)),F||(k==v&&!S&&(E=!0),C==d&&!E&&(S=!0),C!=d&&!E&&(P==D?(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=d,u[u.length]="px;top:",u[u.length]=D,u[u.length]="px;width:",u[u.length]=g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'):(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=d,u[u.length]="px;top:",u[u.length]=D,u[u.length]="px;width:",u[u.length]=g,u[u.length]="px;height:",u[u.length]=P-D+g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'),d=C,v=k,D=v,P=v,S=!1),k!=v&&!S&&(B==H?(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=H,u[u.length]="px;top:",u[u.length]=v,u[u.length]="px;width:",u[u.length]=g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'):(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=H,u[u.length]="px;top:",u[u.length]=v,u[u.length]="px;width:",u[u.length]=B-H+g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'),d=C,v=k,H=d,B=d,E=!1),S&&!E?(k<=D&&(D=k),k>P&&(P=k)):(D=k,P=k),E&&!S?(C<=H&&(H=C),C>B&&(B=C)):(H=C,B=C),i==_.length-1&&(S||(B==H?(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=H,u[u.length]="px;top:",u[u.length]=v,u[u.length]="px;width:",u[u.length]=g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'):(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=H,u[u.length]="px;top:",u[u.length]=v,u[u.length]="px;width:",u[u.length]=B-H+g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>')),E||(P==D?(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=d,u[u.length]="px;top:",u[u.length]=D,u[u.length]="px;width:",u[u.length]=g,u[u.length]="px;height:",u[u.length]=g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'):(u[u.length]='<DIV style="position:absolute;overflow:hidden;left:',u[u.length]=d,u[u.length]="px;top:",u[u.length]=D,u[u.length]="px;width:",u[u.length]=B-H+g,u[u.length]="px;height:",u[u.length]=P-D+g,u[u.length]="px;background-color:",u[u.length]=y,u[u.length]='"></DIV>'))))}return o.innerHTML=u.join(""),o}function H(e,t,n){return this.drawCurve(e,t,n,!0)}function B(e,t,n,r){if(!e||!t)return!1;n||(n=0),r||(r=!1);var i=new Array;for(var o=0;o<t.length;o++)i[o]=p(t[o]);var u=new Array;if(!r||i[0].x!=i[i.length-1].x||i[0].y!=i[i.length-1].y)u[u.length]=i[0];for(var o=1;o<i.length;o++)if(i[o].x!=i[o-1].x||i[o].y!=i[o-1].y)u[u.length]=i[o];i=u;if(i.length<2)return!1;if(i.length==2)return this.drawLine(e,i[0],i[1],"physical");var a=s.appendChild(document.createElement("div")),f=new Array,l=new Array,c=i.length-1;if(!r){for(var o=0;o<=c-1;o++)o==0?j(new Array(i[0],i[0],i[1],i[2]),n,l):o==c-1?j(new Array(i[c-2],i[c-1],i[c],i[c]),n,l):j(new Array(i[o-1],i[o],i[o+1],i[o+2]),n,l);F(e,l,f)}else{for(var o=0;o<=c-1;o++)o==0?j(new Array(i[c],i[0],i[1],i[2]),n,l):o==c-1?j(new Array(i[c-2],i[c-1],i[c],i[0]),n,l):j(new Array(i[o-1],i[o],i[o+1],i[o+2]),n,l);j(new Array(i[c-1],i[c],i[0],i[1]),n,l),F(e,l,f)}return a.innerHTML=f.join(""),a}function j(e,t,n){var r=0,i=0,s=e[1].x-1,o=e[1].y-1,u=0,a=1,f=1.1,l=(1-t)*(e[2].x-e[0].x)/2,c=(1-t)*(e[3].x-e[1].x)/2,h=(1-t)*(e[2].y-e[0].y)/2,p=(1-t)*(e[3].y-e[1].y)/2;while(u<=1)r=0,i=0,r=(2*u*u*u-3*u*u+1)*e[1].x+(u*u*u-2*u*u+u)*l+(-2*u*u*u+3*u*u)*e[2].x+(u*u*u-u*u)*c,i=(2*u*u*u-3*u*u+1)*e[1].y+(u*u*u-2*u*u+u)*h+(-2*u*u*u+3*u*u)*e[2].y+(u*u*u-u*u)*p,r=Math.round(r),i=Math.round(i),r!=s||i!=o?r-s>1||i-o>1||s-r>1||o-i>1?(u-=a,a/=f):(n[n.length]=new jsPoint(r,i),s=r,o=i,u+a>1&&(u=1-a)):a*=f,u+=a}function F(e,t,n){var r=t[0].x,i=t[0].y,s=!1,o=!1,u,a,f,l;u=r,a=r,f=i,l=i;var c=parseInt(e.width),h=e.color.getHex(),p=c,d=c,v=new Array;for(var m=0;m<t.length;m++){var g=!1;x=t[m].x,y=t[m].y,m!=0&&m+1<t.length&&Math.abs(t[m-1].x-t[m+1].x)==1&&Math.abs(t[m-1].y-t[m+1].y)==1&&(v[m-1]||(g=!0,v[m]=!0)),g||(y==i&&!o&&(s=!0),x==r&&!s&&(o=!0),x!=r&&!s&&(l==f?(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=r,n[n.length]="px;top:",n[n.length]=f,n[n.length]="px;width:",n[n.length]=c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'):(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=r,n[n.length]="px;top:",n[n.length]=f,n[n.length]="px;width:",n[n.length]=c,n[n.length]="px;height:",n[n.length]=l-f+c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'),r=x,i=y,f=i,l=i,o=!1),y!=i&&!o&&(a==u?(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=u,n[n.length]="px;top:",n[n.length]=i,n[n.length]="px;width:",n[n.length]=c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'):(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=u,n[n.length]="px;top:",n[n.length]=i,n[n.length]="px;width:",n[n.length]=a-u+c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'),r=x,i=y,u=r,a=r,s=!1),o&&!s?(y<=f&&(f=y),y>l&&(l=y)):(f=y,l=y),s&&!o?(x<=u&&(u=x),x>a&&(a=x)):(u=x,a=x),m==t.length-1&&(o||(a==u?(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=u,n[n.length]="px;top:",n[n.length]=i,n[n.length]="px;width:",n[n.length]=c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'):(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=u,n[n.length]="px;top:",n[n.length]=i,n[n.length]="px;width:",n[n.length]=a-u+c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>')),s||(l==f?(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=r,n[n.length]="px;top:",n[n.length]=f,n[n.length]="px;width:",n[n.length]=c,n[n.length]="px;height:",n[n.length]=c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'):(n[n.length]='<DIV style="position:absolute;overflow:hidden;left:',n[n.length]=r,n[n.length]="px;top:",n[n.length]=f,n[n.length]="px;width:",n[n.length]=a-u+c,n[n.length]="px;height:",n[n.length]=l-f+c,n[n.length]="px;background-color:",n[n.length]=h,n[n.length]='"></DIV>'))))}}function I(e,t,n){function k(e,t){return e.xMin-t.xMin}if(!e||!t)return!1;n||(n=0);var r=new Array;for(var i=0;i<t.length;i++)r[i]=p(t[i]);var o=new Array;if(r[0].x!=r[r.length-1].x||r[0].y!=r[r.length-1].y)o[o.length]=r[0];for(var i=1;i<r.length;i++)if(r[i].x!=r[i-1].x||r[i].y!=r[i-1].y)o[o.length]=r[i];r=o;if(r.length<2)return!1;if(r.length==2)return this.drawLine(pen,r[0],r[1],"physical");var u=s.appendChild(document.createElement("div")),a=new Array,f=e.getHex(),l=new Array,c=new Array,h=new Array,d,v,m=r.length-1,i;for(var i=0;i<=m-1;i++)i==0?q(new Array(r[m],r[0],r[1],r[2]),n,c):i==m-1?q(new Array(r[m-2],r[m-1],r[m],r[0]),n,c):q(new Array(r[i-1],r[i],r[i+1],r[i+2]),n,c);q(new Array(r[m-1],r[m],r[0],r[1]),n,c);var g=R(l,h,c);d=g[0],v=g[1];var y,b,w="",E,S=r.length,x,T,N;for(y=d;y<=v;y++){E=0;var C=l[y];C.sort(k),T=y;for(i=0;i<C.length;i+=2)C[i+1]?(x=C[i].xMin,C[i+1].xMax>C[i].xMax?N=C[i+1].xMax-C[i].xMin+1:N=C[i].xMax-C[i].xMin+1):(x=C[C.length-1].xMin,N=C[C.length-1].xMax-C[C.length-1].xMin+1),a[a.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',a[a.length]=x,a[a.length]="px;top:",a[a.length]=T,a[a.length]="px;width:",a[a.length]=N,a[a.length]="px;background-color:",a[a.length]=f,a[a.length]='"></DIV>'}return u.innerHTML=a.join(""),u}function q(e,t,n){var r=0,i=0,s=e[1].x-1,o=e[1].y-1,u=0,a=1,f=1.1,l=1,c=1,h=1,p=(1-t)*(e[2].x-e[0].x)/2,d=(1-t)*(e[3].x-e[1].x)/2,v=(1-t)*(e[2].y-e[0].y)/2,m=(1-t)*(e[3].y-e[1].y)/2;while(u<=1)r=0,i=0,r=(2*u*u*u-3*u*u+1)*e[1].x+(u*u*u-2*u*u+u)*p+(-2*u*u*u+3*u*u)*e[2].x+(u*u*u-u*u)*d,i=(2*u*u*u-3*u*u+1)*e[1].y+(u*u*u-2*u*u+u)*v+(-2*u*u*u+3*u*u)*e[2].y+(u*u*u-u*u)*m,r=Math.round(r),i=Math.round(i),r!=s||i!=o?r-s>1||i-o>1||s-r>1||o-i>1?(u-=a,a/=f):(n[n.length]=new jsPoint(r,i),s=r,o=i,u+a>1&&(u=1-a)):a*=f,u+=a}function R(e,t,n){function r(){this.xMax=0,this.xMin=0,this.i=0}var i=new Array,s,o,u,a,f=!0,l,c=-1,h,p;for(var d=0;d<n.length;d++){var v=!1;x=n[d].x,y=n[d].y,d!=0&&d+1<n.length&&(n[d-1].x-n[d+1].x==1||n[d+1].x-n[d-1].x==1)&&(n[d-1].y-n[d+1].y==1||n[d+1].y-n[d-1].y==1)&&(i[d-1]||(v=!0,i[d]=!0)),v||(a||(a=y),s||(s=y),o||(o=y),y<s&&(s=y),y>o&&(o=y),e[y]?(l=e[y][e[y].length-1],d-l.i==1?(l.xMin>x&&(l.xMin=x),l.xMax<x&&(l.xMax=x),l.i=d):(e[y][e[y].length]=new r,e[y][e[y].length-1].xMin=x,e[y][e[y].length-1].xMax=x,e[y][e[y].length-1].i=d)):(e[y]=new Array,e[y][0]=new r,e[y][0].xMin=x,e[y][0].xMax=x,e[y][0].i=d),h=t[t.length-1],p=t[t.length-2],h&&p&&(h>y&&p<h||h<y&&p>h)&&(e[h][e[h].length]=e[h][e[h].length-1]),t[0]?t[t.length-1]!=y&&(t[t.length]=y):t[0]=y,u=y)}h=t[0],p=h;var d=1;while(h==p)p=t[t.length-d],d++;h&&p&&(h>t[1]&&p<h||h<t[1]&&p>h)&&(e[h][e[h].length]=e[h][e[h].length-1]);if(a==u){var m=e[a][0],g=e[u][e[u].length-1];g.xMax>m.xMax&&(e[a][0].xMax=g.xMax),g.xMin<m.xMin&&(e[a][0].xMin=g.xMin),e[u].length>1?e[u].pop():e.pop()}return new Array(s,o)}function U(e,t,n,i,o,u){if(!e||!t)return!1;phPoint=p(t),o!=null&&(o=Math.round(o*r)+"px");var a=s.appendChild(document.createElement("div"));return a.style.position="absolute",a.style.left=phPoint.x+"px",a.style.top=phPoint.y+"px",i&&(a.style.color=i.getHex()),n&&(n.family&&(a.style.fontFamily=n.family),n.weight&&(a.style.fontWeight=n.weight),n.size&&(a.style.fontSize=n.size),n.style&&(a.style.fontStyle=n.style),n.variant&&(a.style.fontVariant=n.variant)),o&&(a.style.width=o),u&&(a.style.textAlign=u),a.innerHTML=e,a}function z(e,t,n,i){if(!e||!t)return!1;phPoint=p(t),n!=null&&(n=Math.round(n*r)+"px"),i!=null&&(i=Math.round(i*r)+"px");var o=s.appendChild(document.createElement("div"));o.style.position="absolute",o.style.left=phPoint.x+"px",o.style.top=phPoint.y+"px";var u=o.appendChild(document.createElement("img"));return u.src=e,n!=null&&(u.style.width=n,o.style.width=n),i!=null&&(u.style.height=i,o.style.height=i),o}function W(){s.innerHTML=""}var n=new jsPoint(0,0),r=1,i="default",s;e?s=e:s=document.body;var o=null;this.drawLine=m,this.drawRectangle=b,this.fillRectangle=w,this.drawCircle=N,this.drawEllipse=S,this.fillCircle=C,this.fillEllipse=k,this.fillArc=L,this.drawArc=A,this.drawPolyline=O,this.drawPolygon=M,this.fillPolygon=_,this.drawBezier=D,this.drawPolyBezier=P,this.drawCurve=B,this.drawClosedCurve=H,this.fillClosedCurve=I,this.drawText=U,this.drawImage=z,this.clear=W,this.showGrid=d,this.hideGrid=v,this.setOrigin=u,this.getOrigin=a,this.setScale=f,this.getScale=l,this.setCoordinateSystem=c,this.getCoordinateSystem=h,this.logicalToPhysicalPoint=p,o=document.createElement("div"),o.style.left="0px",o.style.top="0px",s.clientWidth>0&&s.clientHeight>0?(o.style.width=parseInt(s.clientWidth)-1+"px",o.style.height=parseInt(s.clientHeight)-1+"px"):(o.style.width="0px",o.style.height="0px"),o.style.zIndex=0,o.style.position="absolute",o.style.display="none",s.appendChild(o)}define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),function(e){function r(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),(e.event.dispatch||e.event.handle).apply(this,r)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=t.length;n;)e.event.fixHooks[t[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),define("mousewheel",function(){}),define("normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n,i){t=r(t),n=r(n);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,u,a,e;while(u=s.exec(e)){a=u[3]||u[2]||u[5]||u[6]||u[4];var f;i&&a.substr(0,1)=="/"?f=i+a:f=o(a,t,n);var l=u[5]||u[6]?1:0;e=e.substr(0,s.lastIndex-a.length-l-1)+f+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(f.length-a.length)}return e};return f.convertURIBase=o,f}),define("jsDraw2D",function(){}),function(e){e.fn.scrollIntoView=function(t,n,r){function h(t,n){n===undefined?e.isFunction(i.complete)&&i.complete.call(t):i.smooth?e(t).stop().animate({scrollTop:n},i):(t.scrollTop=n,e.isFunction(i.complete)&&i.complete.call(t))}var i=e.extend({},e.fn.scrollIntoView.defaults);e.type(t)=="object"?e.extend(i,t):e.type(t)=="number"?e.extend(i,{duration:t,easing:n,complete:r}):t==0&&(i.smooth=!1);var s=Infinity,o=0;this.size()==1?(s=this.get(0).offsetTop)==null||(o=s+this.get(0).offsetHeight):this.each(function(e,t){t.offsetTop<s?s=t.offsetTop:t.offsetTop+t.offsetHeight>o?o=t.offsetTop+t.offsetHeight:null}),o-=s;var u=this.commonAncestor().get(0),f=e(window).height();while(u){var l=u.scrollTop,c=u.clientHeight;c>f&&(c=f),c==0&&u.tagName=="BODY"&&(c=f);if(u.scrollTop!=((u.scrollTop+=1)==null||u.scrollTop)&&(u.scrollTop-=1)!=null||u.scrollTop!=((u.scrollTop-=1)==null||u.scrollTop)&&(u.scrollTop+=1)!=null){s<=l?h(u,s):s+o>l+c?h(u,s+o-c):h(u,undefined);return}u=u.parentNode}return this},e.fn.scrollIntoView.defaults={smooth:!0,duration:null,easing:e.easing&&e.easing.easeOutExpo?"easeOutExpo":null,complete:e.noop(),step:null,specialEasing:{}},e.fn.isOutOfView=function(e){var t=!0;return this.each(function(){var n=this.parentNode,r=n.scrollTop,i=n.clientHeight,s=this.offsetTop,o=this.offsetHeight;(e?s>r+i:s+o>r+i)||(e?s+o<r:s<r)||(t=!1)}),t},e.fn.commonAncestor=function(){var t=[],n=Infinity;e(this).each(function(){var r=e(this).parents();t.push(r),n=Math.min(n,r.length)});for(var r=0;r<t.length;r++)t[r]=t[r].slice(t[r].length-n);for(var r=0;r<t[0].length;r++){var i=!0;for(var s in t)if(t[s][r]!=t[0][r]){i=!1;break}if(i)return e(t[0][r])}return e([])}}(jQuery),define("scrollIntoView",function(){}),function(e){function t(t){var r=function(){return{maxZoom:3,minZoom:.5,radius:15,dock:"TC",imgError:!1,assistiveTool:"1",tbodyId:"tbody",renderToId:"legend-render",nopic:"",selectedRowBgClass:"row-active",legendExist:!1,isShowAssistiveTool:!0,loading:!0,swfLegendWidth:0,swfLegendHeight:0,circleLineColor:{seekColor:"#FFDD00",checkedColor:"#FF1020"},callbacks:{onPrint:null,onToolClick:null,onBindPartList:null,onLegendDbClick:null,onLegendBeforeLoad:null,onLegendAfterLoad:null,onSelectionPartError:null}}}();(function(){var e=document.createElement("link"),t=require.s.contexts._.config.baseUrl+n+"css/hotpoint.css";e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)})();var i=function(t){this.opts=e.extend(!0,{},r,t||{}),this.LEGEND_ID="legend",this.LEGEND_IMG_ID="legend-img",this.LEGEND_WRAP_ID="legend-wrap",this.percent=1,this.dictList={},this.isDone=!0,this.curCoords=[],this.curCallouts=[],this.dragLegendPosition={},this.radius=this.opts.radius,this.data=this.opts.data||[],this.dragAssisactiveToolPosition={},this.init()};return i.prototype=function(){return{init:function(){var e=this;e.buildDomEl(),e.initGraphics(),e.bindResize(),e.bindEvent(),e.buildAssistiveTool()},buildDomEl:function(){var t=this,n=t.getLegendHTML();t.$renderTo=e("#"+t.opts.renderToId),t.$renderTo.append(n),t.$tbody=e("#"+t.opts.tbodyId),t.$legend=e("#"+t.LEGEND_ID),t.$legendWrap=e("#"+t.LEGEND_WRAP_ID)},getLegendHTML:function(){var e=this,t=[];return t.push('<div id="'+e.LEGEND_WRAP_ID+'" class="legend-wrap">'),t.push('<div id="'+e.LEGEND_ID+'" class="legend">'),t.push("</div>"),t.push("</div>"),t.join(" ")},initGraphics:function(){var e=this;e.graphics=new jsGraphics(e.$legend.get(0))},bindLegend:function(e,t){var n=this;n.destroyLegend(),n.data=e.data,n.swfLegendWidth=e.swfLegendWidth,n.swfLegendHeight=e.swfLegendHeight,n.setLegendSrc(e.src,t)},destroyLegend:function(){var e=this;e.data=null,e.dictList=null,e.buildData=[],e.curCoords=[],e.opts.legendExist=!1,e.resetLegend(),e.clearHotpoint(),e.$legend.html("")},setLegendSrc:function(t,n){var r=this,i=new Image,s=r.opts.callbacks.onLegendBeforeLoad,o=r.opts.callbacks.onLegendAfterLoad;typeof s=="function"&&s.apply(r,[]),r.opts.loading&&r.loadingShow(),e(i).on("load",function(){typeof o=="function"&&o.apply(r,[i]),r.finishImgLoad(i,n)}).on("error",function(){typeof o=="function"&&o.apply(r,[i]),r.loadErrorImg()}).attr("src",t)},finishImgLoad:function(e,t){var n=this;n.opts.legendExist=!0,n.legendRawSize={width:e.width,height:e.height},n.settingSize(),n.$legend.html(e),n.buildCoord(n.data),!n.existAssistiveTool,typeof t=="function"&&t.apply(n,[]),n.opts.loading&&n.loadingHide(),n.disabledAccistiveTool()},loadErrorImg:function(){var e=this,t=e.opts.nopic;e.opts.legendExist=!1,e.legendRawSize={width:0,height:0},e.$legend.empty().css("background","url("+t+") no-repeat center center"),e.disabledAccistiveTool(),e.opts.loading&&e.loadingHide()},settingSize:function(){var e=this,t=e.$legendWrap.parent().width(),n=e.$legendWrap.parent().height(),r=e.opts.legendExist?e.scalingDownCalc(e.legendRawSize.width,e.legendRawSize.height,t,n):{top:0,left:0,width:t,height:n};e.$legend.css({top:r.top+"px",left:r.left+"px",width:r.width,height:r.height}),e.$legendWrap.css({width:t,height:n}),e.legendWidth=e.$legend.width(),e.legendHeight=e.$legend.height(),e.legendOffsetTop=e.$legend.offset().top,e.legendOffsetLeft=e.$legend.offset().left,e.x1=e.$legendWrap.offset().left,e.y1=e.$legendWrap.offset().top,e.x2=e.$legendWrap.offset().left+e.$legendWrap.width(),e.y2=e.$legendWrap.offset().top+e.$legendWrap.height()},buildCoord:function(e){var t=this,n=t.radius,r,i=0,s=0,o=0,u,a=0,f=0,l=0,c=0,h=0,p=0,d,v=t.swfLegendWidth/t.legendWidth,m=t.swfLegendHeight/t.legendHeight;t.dictList={},t.buildData=[];for(;u=e[i];i++){if(!u.x||!u.y)continue;r=u.callout,a=parseInt(u.x/v),f=parseInt(u.y/m),t.buildData.push({x:a,y:f,callout:r}),l=a-n,c=a+n,h=f-n,p=f+n;for(s=l;s<c;s++)for(o=h;o<p;o++)d=s+"-"+o,t.dictList[d]={x:a,y:f}}},bindResize:function(){var t=this;e(window).resize(function(){t.legendRawSize&&t.resizeToAdjust()})},resizeToAdjust:function(){var e=this;e.resetLegend(),e.settingSize(),e.buildCoord(e.data||[]),e.redraw(),e.assistiveToolDock(),e.linkHotpoint(e.curCallouts)},bindEvent:function(){var e=this;e.$legend.on({click:function(t){e.opts.legendExist&&e.clickLegend(t,this),t.preventDefault()},dblclick:function(t){typeof e.opts.callbacks.onLegendDbClick=="function"?e.opts.callbacks.onLegendDbClick.apply(e,[]):e.opts.legendExist&&e.zoomLegend(1,t),t.preventDefault()},mousemove:function(t){e.opts.legendExist&&e.seekHotpoint(t,this),t.preventDefault()},mousedown:function(t){e.percent>1&&e.opts.legendExist&&e.startDragLegend(t,this),t.preventDefault()},mousewheel:function(t,n){e.opts.legendExist&&e.zoomLegend(n,t),t.preventDefault()}}),e.opts.callbacks.onBindPartList===null&&e.$tbody.on("click","tr[data-callout]",function(){e.opts.legendExist&&e.rowsClick(this)})},buildAssistiveTool:function(){var t=this,n=t.getAssistiveToolTemplate();t.$assistiveTool=e(n),t.$legendWrap.append(t.$assistiveTool),t.bindAssistiveToolEvent(),t.assistiveToolDock(),t.$assistiveTool.show(),t.existAssistiveTool=!0},disabledAccistiveTool:function(){var e=this,t=e.$assistiveTool.find("[data-action=zoomout]"),n=e.$assistiveTool.find("[data-action=zoomin]"),r=e.$assistiveTool.find("[data-action=reset]");e.opts.legendExist?(t.removeClass("assistive-tool-zoomout-disabled").addClass("assistive-tool-zoomout"),n.removeClass("assistive-tool-zoomin-disabled").addClass("assistive-tool-zoomin"),r.removeClass("assistive-tool-reset-disabled").addClass("assistive-tool-reset")):(t.removeClass("assistive-tool-zoomout").addClass("assistive-tool-zoomout-disabled"),n.removeClass("assistive-tool-zoomin").addClass("assistive-tool-zoomin-disabled"),r.removeClass("assistive-tool-reset").addClass("assistive-tool-reset-disabled"))},bindAssistiveToolEvent:function(){var t=this,n;t.$assistiveTool.on("mousedown",function(e){t.startDragAssistiveTool(e,this)}),t.$assistiveTool.on("click","a:not([class*='disabled'])",function(r){n=e(this).attr("data-action");switch(n){case"zoomin":t.zoomIn();break;case"zoomout":t.zoomOut();break;case"up":t.moveUp();break;case"right":t.moveRight();break;case"down":t.moveDown();break;case"left":t.moveLeft();break;case"reset":t.resetLegend(),t.redraw();break;case"print":t.opts.callbacks.onPrint&&t.opts.callbacks.onPrint.apply(null,[]);break;default:t.opts.callbacks.onToolClick&&t.opts.callbacks.onToolClick.apply(null,[n])}})},assistiveToolDock:function(){if(!this.opts.legendExist)return;var e=this,t=e.opts.dock,n=e.$legendWrap.height()-e.$assistiveTool.height()-5,r=e.$legendWrap.width()-e.$assistiveTool.width()-5,i=r/2;switch(t){case"TL":e.$assistiveTool.css({left:"5px",top:"5px"});break;case"TC":e.$assistiveTool.css({left:i+"px",top:"5px"});break;case"TR":e.$assistiveTool.css({left:r+"px",top:"5px"});break;case"BL":e.$assistiveTool.css({left:"5px",top:n+"px"});break;case"BC":e.$assistiveTool.css({left:i+"px",top:n+"px"});break;case"BR":e.$assistiveTool.css({left:r+"px",bottom:"0px"});break;default:}},startDragAssistiveTool:function(t,n){var r=this,i={},s=r.getSizeAndPosition(r.$legendWrap),o=r.getSizeAndPosition(r.$assistiveTool);r.dragAssisactiveToolPosition.top=t.pageY-s.offsetTop-o.top,r.dragAssisactiveToolPosition.left=t.pageX-s.offsetLeft-o.left,e(document).bind({"mousemove.hotpoint":function(e){i=r.movingRange(e,n,r.dragAssisactiveToolPosition),r.dragMove(n,i),e.preventDefault()},"mouseup.hotpoint":function(){e(this).unbind("mousemove.hotpoint mouseup.hotpoint"),t.preventDefault()}})},rowsClick:function(t){var n=this,r=e(t).attr("data-callout");n.linkHotpoint([r])},seekHotpoint:function(e,t){var n=this,r="",i=n.getPosition(e,t),s=n.opts.circleLineColor.seekColor,o=n.getCoord(i.left,i.top),u=n.$legend.find("div[id^='t-']").attr("id");n.$legend.css("cursor","default");if(typeof o!="undefined"){n.$legend.css("cursor","pointer"),r="t-"+o.x+"-"+o.y;if(u===r)return;typeof u!="undefined"&&n.clearHotpoint(u),n.checkCoordExist(o)&&n.drawHotpoint(r,o,s)}else typeof u!="undefined"&&n.clearHotpoint(u)},checkCoordExist:function(e){var t=this,n=0,r;for(;r=t.curCoords[n];n++)if(r.x==e.x&&r.y==e.y)return!1;return!0},clickLegend:function(e,t){var n=this,r,i=[],s,o=n.getPosition(e,t),u=n.getCoord(o.left,o.top),a=n.opts.callbacks.onSelectionCallout;typeof u!="undefined"&&(r=n.getCallout(u.x,u.y),typeof r!="undefined"&&(i.push(r),s=n.getCalloutCoord(i),s.length>0&&(n.clearHotpoint(),n.activateHotpoint(s,i),typeof a=="function"&&a.apply(n,[i])),n.curCoords=s),n.curCallouts=i)},startDragLegend:function(t,n){var r=this,i={},s=r.getSizeAndPosition(r.$legend),o=r.getSizeAndPosition(r.$legendWrap);r.dragLegendPosition.top=t.pageY-o.offsetTop-s.top,r.dragLegendPosition.left=t.pageX-o.offsetLeft-s.left,e(document).bind({"mousemove.hotpoint":function(e){i=r.getMovePosition(e,r.dragLegendPosition),r.dragMove(n,i),e.preventDefault()},"mouseup.hotpoint":function(){e(this).unbind("mousemove.hotpoint mouseup.hotpoint"),t.preventDefault()}})},getCallout:function(e,t){var n=this,r=0,i={},s;for(;r<n.buildData.length;r++){i=n.buildData[r];if(i.x===e&&i.y===t){s=i.callout;break}}return s},getCoord:function(e,t){var n=this,r=e+"-"+t,i=n.dictList[r];return i},drawHotpoint:function(t,n,r){if(!this.opts.legendExist)return;var i=this,s=i.percent,o=n.x*s,u=n.y*s,a=i.radius*s,f=new jsColor(r),l=new jsPen(f,3),c=new jsPoint(o,u),h=i.graphics.drawCircle(l,c,a);e(h).attr({id:t,"data-type":"hotpoint"})},activateHotpoint:function(e,t){var n=this,r=0,i,s=n.opts.circleLineColor.checkedColor;for(;r<e.length;r++)i=e[r].x+"-"+e[r].y,n.drawHotpoint(i,e[r],s)},linkHotpoint:function(e){var t=this;t.clearHotpoint(),t.curCallouts=e,t.curCoords=t.getCalloutCoord(e),t.curCoords.length===1?(t.legendToCenter(t.curCoords[0].x,t.curCoords[0].y),t.activateHotpoint(t.curCoords,e)):(t.resetLegend(),t.redraw())},clearHotpoint:function(e){var t=this;e?t.$legend.find("#"+e).remove():t.$legend.find("div[data-type='hotpoint']").remove()},movingRange:function(t,n,r){var i=this,s=5,o=5,u=i.getMovePosition(t,r),a=i.$legendWrap.width()-e(n).width()-5,f=i.$legendWrap.height()-e(n).height()-5;return u.left<s&&(u.left=s),u.top<o&&(u.top=o),u.left>a&&(u.left=a),u.top>f&&(u.top=f),u},dragMove:function(t,n){var r=this;e(t).css({left:n.left+"px",top:n.top+"px"})},getMovePosition:function(e,t){var n=this,r=n.getSizeAndPosition(n.$legendWrap),i=e.pageY-r.offsetTop-t.top,s=e.pageX-r.offsetLeft-t.left;return{top:i,left:s}},zoomLegend:function(e,t){var n=this,r=1,i,s=1.2,o=0,u=0,a=0,f=0,l=0,c=0,h=n.getSizeAndPosition(n.$legend),p=n.getSizeAndPosition(n.$legendWrap);e>0?(u=h.width*s,o=h.height*s):(u=h.width/s,o=h.height/s),r=u/n.legendWidth;if(r>=n.opts.maxZoom||r<=n.opts.minZoom)return;n.percent=r,n.$legend.width(u).height(o),typeof t=="undefined"?i={top:(p.height-o)/2,left:(p.width-u)/2}:i=n.getZoomPosition(t,h.width,h.height,u,o),n.$legend.css({left:i.left+"px",top:i.top+"px"}),n.redraw()},getZoomPosition:function(e,t,n,r,i){var s=this,o=s.getCursorPosition(e),u=s.getSizeAndPosition(s.$legendWrap),a=e.pageX-u.offsetLeft,f=e.pageY-u.offsetTop,l=(o.top/n).toFixed(2),c=(o.left/t).toFixed(2);return{top:f-i*l,left:a-r*c}},getCursorPosition:function(e){var t=this,n=t.getSizeAndPosition(t.$legendWrap),r=t.getSizeAndPosition(t.$legend);return{top:e.pageY-n.offsetTop-r.top,left:e.pageX-n.offsetLeft-r.left}},getPosition:function(e){var t=this,n=t.getSizeAndPosition(t.$legend),r=t.getSizeAndPosition(t.$legendWrap),i=t.getLegendMarge(),s=parseInt((e.pageY-t.legendOffsetTop-n.top+i.margeTop)/t.percent),o=parseInt((e.pageX-t.legendOffsetLeft-n.left+i.margeLeft)/t.percent);return{top:s,left:o}},getLegendMarge:function(){var e=this,t=(e.$legendWrap.width()-e.legendWidth)/2,n=(e.$legendWrap.height()-e.legendHeight)/2;return{margeLeft:t,margeTop:n}},legendToCenter:function(e,t){var n=this,r=n.percent,i=n.getSizeAndPosition(n.$legend),s=n.getSizeAndPosition(n.$legendWrap),o=n.x1,u=n.y1,a=n.x2,f=n.y2,l=s.offsetTop+t*r+i.top-15,c=s.offsetLeft+e*r+i.left-15,h=s.height/2-t*r-15,p=s.width/2-e*r-15;if(c>o&&l>u&&c<a&&l<f)return;if(i.cssTop===0&&i.cssLeft===0&&i.width===n.legendWidth&&i.height===n.legendHeight)return;n.$legend.css({left:p+"px",top:h+"px"})},getSizeAndPosition:function(e){return{width:e.width(),height:e.height(),top:e.position().top,left:e.position().left,offsetTop:e.offset().top,offsetLeft:e.offset().left}},getCalloutCoord:function(t){var n=this,r,i=[],s=0,o=n.buildData;for(;s<o.length;s++)r=o[s].callout.toString(),e.inArray(r,t)>-1&&i.push({x:o[s].x,y:o[s].y});return i},zoomIn:function(e){var t=this;t.zoomLegend(1,e)},zoomOut:function(e){var t=this;t.zoomLegend(0,e)},resetLegend:function(){var e=this,t=(e.$legendWrap.height()-e.legendHeight)/2,n=(e.$legendWrap.width()-e.legendWidth)/2;e.percent=1,e.$legend.css({top:t+"px",left:n+"px",width:e.legendWidth,height:e.legendHeight})},moveUp:function(){var e=this;e.isDone&&e.percent>1&&(e.isDone=!1,e.$legend.animate({top:"+=100px"},"slow",function(){e.isDone=!0}))},moveLeft:function(){var e=this;e.isDone&&e.percent>1&&(e.isDone=!1,e.$legend.animate({left:"+=100px"},"slow",function(){e.isDone=!0}))},moveRight:function(){var e=this;e.isDone&&e.percent>1&&(e.isDone=!1,e.$legend.animate({left:"-=100px"},"slow",function(){e.isDone=!0}))},moveDown:function(){var e=this;e.isDone&&e.percent>1&&(e.isDone=!1,e.$legend.animate({top:"-=100px"},"slow",function(){e.isDone=!0}))},redraw:function(){var e=this;e.curCoords.length>0&&(e.clearHotpoint(),e.activateHotpoint(e.curCoords,e.curCallouts))},scalingDownCalc:function(e,t,n,r){var i,s,o,u;return t/e>=r/n?t>r?(s=r,i=e*r/t):(i=e,s=t):e>n?(i=n,s=t*n/e):(i=e,s=t),o=(r-s)/2,u=(n-i)/2,{width:i,height:s,top:o,left:u}},getAssistiveToolTemplate:function(){var n=this,r=n.opts.assistiveTool;return e(t).wrap("<div></div>").parent().find("div[data-template-id='"+r+"']").get(0).outerHTML},loadingShow:function(){var e=this,t='<span style="display:block;line-height:28px;font-family:,font-size:10pt;height:28px;">loading...</span>';e.$legendWrap.block({message:t,baseZ:900,css:{width:"15%"}})},loadingHide:function(){var e=this;e.$legendWrap.unblock()}}}(),i}if(typeof define=="function"&&define.amd&&define.amd.jQuery){var n=function(){var e,t=require.s.contexts._.config,n=t.paths.hotpoint;if(typeof n!="undefined")return e=n.split(/\/+/g),e.slice(0,e.length-2).join("/")+"/";alert("require config paths 'hotpoint' key not exist")}();define("hotpoint",["text!"+n+"template/assistive-template.htm","mousewheel","normalize","jsDraw2D","scrollIntoView"],t)}else t(jQuery)}(jQuery);